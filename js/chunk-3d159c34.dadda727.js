(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d159c34"],{"199e":function(t,e,o){"use strict";o("8f79")},"6ab7":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"following"},[o("div",{staticClass:"following-content"},t._l(t.users,(function(e){return o("div",{key:e.Followship.id,staticClass:"following-list"},[o("router-link",{attrs:{to:{name:"other",params:{id:e.Followship.followingId}}}},[o("img",{staticClass:"following-list__avatar",attrs:{src:e.avatar,alt:"avatar on screen"}})]),o("div",{staticClass:"following-item"},[o("div",{staticClass:"following-title"},[o("span",{staticClass:"following-title__name"},[t._v(t._s(e.name))]),o("router-link",{attrs:{to:{name:"other",params:{id:e.Followship.followingId}}}},[o("span",{staticClass:"following-title__account"},[t._v("@"+t._s(e.account))])]),e.isFollowed?o("button",{staticClass:"following-title__followed",attrs:{type:"button"},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.deleteFollow(e.Followship.followingId)}}},[t._v(" 正在跟隨 ")]):o("button",{staticClass:"following-title__follow",attrs:{type:"button"},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.addFollow(e.Followship.followingId)}}},[t._v(" 跟隨 ")])],1),o("p",{staticClass:"following-title__description"},[t._v(" "+t._s(e.introduction)+" ")])])],1)})),0)])},a=[],l=o("5530"),r=o("1da1"),i=(o("d81d"),o("96cf"),o("4cce")),s={name:"Following",data:function(){return{users:[]}},props:{initialUpdate:{type:Boolean,required:!0}},mounted:function(){this.fetchFollowing()},watch:{initialUpdate:function(){this.fetchFollowing()}},methods:{fetchFollowing:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o=t.$route.params.id,e.next=4,i["a"].getUserFollowing(o);case 4:n=e.sent,console.log(n.data),t.users=n.data,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},deleteFollow:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,i["a"].deleteFollow({userId:t});case 3:n=o.sent,a=n.data,console.log(a),e.users=e.users.map((function(e){return e.id!==t?e:Object(l["a"])(Object(l["a"])({},e),{},{isFollowed:!1})})),e.fetchFollowing(),e.$emit("update-popular"),o.next=14;break;case 11:o.prev=11,o.t0=o["catch"](0),console.log(o.t0);case 14:case"end":return o.stop()}}),o,null,[[0,11]])})))()},addFollow:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,i["a"].addFollow({id:t});case 3:n=o.sent,a=n.data,console.log(a),e.users=e.users.map((function(e){return e.id!==t?e:Object(l["a"])(Object(l["a"])({},e),{},{isFollowed:!0})})),e.fetchFollowing(),e.$emit("update-popular"),o.next=14;break;case 11:o.prev=11,o.t0=o["catch"](0),console.log(o.t0);case 14:case"end":return o.stop()}}),o,null,[[0,11]])})))()}}},c=s,u=(o("199e"),o("2877")),d=Object(u["a"])(c,n,a,!1,null,"f0465c80",null);e["default"]=d.exports},"8f79":function(t,e,o){},d81d:function(t,e,o){"use strict";var n=o("23e7"),a=o("b727").map,l=o("1dde"),r=l("map");n({target:"Array",proto:!0,forced:!r},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-3d159c34.dadda727.js.map