(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d188c67"],{ae8f:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"follows"},[o("div",{staticClass:"follows-content"},t._l(t.users,(function(e){return o("div",{key:e.Followship.id,staticClass:"follows-list"},[o("img",{staticClass:"follows-list__avatar",attrs:{src:e.avatar,alt:"avatar on screen"}}),o("div",{staticClass:"follows-item"},[o("div",{staticClass:"follows-title"},[o("span",{staticClass:"follows-title__name"},[t._v(t._s(e.name))]),o("span",{staticClass:"follows-title__account"},[t._v("@"+t._s(e.account))]),e.isFollowed?o("button",{staticClass:"follows-title__followed",attrs:{type:"button"},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.deleteFollow(e.Followship.followerId)}}},[t._v(" 正在跟隨 ")]):o("button",{staticClass:"follows-title__follow",attrs:{type:"button"},on:{click:function(o){return o.stopPropagation(),o.preventDefault(),t.addFollow(e.Followship.followerId)}}},[t._v(" 跟隨 ")])]),o("p",{staticClass:"follows-title__description"},[t._v(" "+t._s(e.introduction)+" ")])])])})),0)])},s=[],a=o("5530"),r=o("1da1"),l=(o("d81d"),o("96cf"),o("4cce")),c={name:"Follows",props:{initialUpdate:{type:Boolean,required:!0}},data:function(){return{users:[]}},watch:{initialUpdate:function(){this.fetchFollowers()}},mounted:function(){this.fetchFollowers()},methods:{fetchFollowers:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o=t.$route.params.id,e.next=4,l["a"].getUserFollowers(o);case 4:n=e.sent,t.users=n.data,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},deleteFollow:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,l["a"].deleteFollow({userId:t});case 3:n=o.sent,s=n.data,console.log(s),e.users=e.users.map((function(e){return e.id!==t?e:Object(a["a"])(Object(a["a"])({},e),{},{isFollowed:!1})})),e.fetchFollowers(),e.$emit("update-popular"),o.next=14;break;case 11:o.prev=11,o.t0=o["catch"](0),console.log(o.t0);case 14:case"end":return o.stop()}}),o,null,[[0,11]])})))()},addFollow:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function o(){var n,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,l["a"].addFollow({id:t});case 3:n=o.sent,s=n.data,console.log(s),e.users=e.users.map((function(e){return e.id!==t?e:Object(a["a"])(Object(a["a"])({},e),{},{isFollowed:!0})})),e.fetchFollowers(),e.$emit("update-popular"),o.next=14;break;case 11:o.prev=11,o.t0=o["catch"](0),console.log(o.t0);case 14:case"end":return o.stop()}}),o,null,[[0,11]])})))()}}},i=c,u=(o("e82b"),o("2877")),d=Object(u["a"])(i,n,s,!1,null,"449660f3",null);e["default"]=d.exports},d81d:function(t,e,o){"use strict";var n=o("23e7"),s=o("b727").map,a=o("1dde"),r=a("map");n({target:"Array",proto:!0,forced:!r},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},e82b:function(t,e,o){"use strict";o("f819")},f819:function(t,e,o){}}]);
//# sourceMappingURL=chunk-0d188c67.7c6bcb9e.js.map